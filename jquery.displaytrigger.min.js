/*
 * 
 * displaytrigger
 * 
 * ---
 * @Copyright(c) 2012, falsandtru
 * @license MIT  http://opensource.org/licenses/mit-license.php  http://sourceforge.jp/projects/opensource/wiki/licenses%2FMIT_license
 * @version 1.2.1
 * @updated 2013/05/07
 * @author falsandtru  http://fat.main.jp/  http://sa-kusaku.sakura.ne.jp/
 * @Compressor Closure Compiler
 */
(function(){function n(n){function u(c,a,b,s){var e=b===g?v:b,m=!1,f,j;f=jQuery(a.trigger,e);j=f.eq(a.index);var h=jQuery(s).scrollTop(),k=a.height[s===g?"window":"element"],d=h===k?a.direction:h<k?-1:1,k=Math.abs(h-k);a.direction!==d&&(a.turn=!0,a.end=!1,a.direction=d,a.index=0>a.index?0:f.length<=a.index?f.length-1:a.index,j=f.eq(a.index));a.distance=0===k?a.distance:k;a.height[s===g?"window":"element"]=h;a.end=j[0]?!1:a.end;-1===a.direction&&a.length<f.length&&(a.turn=!1,a.end=!1);a.length=f.length;
switch(!0){case !f.length:break;case 0===a.step&&!j[0]:a.index+=-1;return;case 0>a.index:a.index=0;a.end=!0;break;case f.length<=a.index:a.index=f.length-1;a.end=!0;break;case a.beforehand>a.index&&!jQuery.data(j[0],a.nss.data+"-fired"):m=!0;break;default:if(a.end)break;if(!a.multi&&jQuery.data(j[0],a.nss.data+"-fired"))break;var k=jQuery(g).scrollTop(),n=jQuery(g).height(),h=j.offset().top,d=j.height(),l=0>a.direction?0:1,l=-1<=a.ahead[l]&&1>=a.ahead[l]?parseInt(n*a.ahead[l]):parseInt(a.ahead[l]),
p,q;switch(a.mode){case "ratio":break;case "border":m=k+(1===a.direction?-l:n+l);p=m>=h;q=m<=h+d;m=a.turn&&(1===a.direction?m-a.distance>h:m+a.distance<h+d)?!1:a.skip?p&&q:1===a.direction?p:q;break;case "toggle":break;case "hide":break;default:p=k>=h-n-l,q=k<=h+d+l,m=a.turn&&a.multi&&(1===a.direction?k-a.distance>h-n-l:k+a.distance<h+d+l)?!1:a.skip?p&&q:1===a.direction?p:q}}m&&(jQuery.data(j[0],a.nss.data+"-fired",!0),a.count+=1,a.callback.apply(j[0],[c,a.parameter,{index:a.index,length:f.length,
direction:a.direction}]));if(!f.length||a.terminate&&!a.multi&&0!==a.step&&a.count>=f.length){f=0;jQuery(b).unbind(a.nss.displaytrigger);jQuery(s).unbind(a.nss.scroll).unbind(a.nss.resize);jQuery.removeData(e,a.nss.data);for(e=0;j=a.context[e];e++)f+=jQuery.data(j,a.nss.data)?1:0;!f&&!a.context[0]===g&&jQuery(g).unbind(a.nss.scroll).unbind(a.nss.resize);r[a.id]=t}else if(!a.end&&!m&&isFinite(l)&&(1===a.direction?!p:!q))a.turn=!1;else if(a.index+=0===a.step&&!m?a.direction:0===a.step&&-1===a.direction?
a.direction:a.step*a.direction,!a.end)return arguments.callee.apply(this,arguments)}if("function"===typeof this)return arguments.callee.apply(jQuery(g),arguments);var e="object"===typeof window.validator?window.validator:!1;(e=e?e.clone({name:"jquery.displaytrigger.js",base:!0}):e)&&e.start();e&&e.test(1,1,0,"plugin load");var b=jQuery.extend(!0,{},{id:0,gns:"displaytrigger",ns:t,trigger:t,callback:function(){},parameter:[],ahead:0,beforehand:0,step:1,multi:!1,skip:!1,expand:!0,delay:300,mode:"show",
terminate:!0,reset:!0},n),d=[b.gns].concat(b.ns||[]);b.reset&&jQuery.extend(!0,b,{nss:{displaytrigger:d.join("."),scroll:["scroll"].concat(d.join(":")).join("."),resize:["resize"].concat(d.join(":")).join("."),data:d.join(":"),array:d},context:this,scope:this[0]===g?jQuery(v):jQuery(this),index:0,length:0,ahead:typeof b.ahead in{string:1,number:1}?[b.ahead,b.ahead]:b.ahead,count:0,height:{},direction:1,distance:0,turn:!1,end:!1,reset:!1,queue:[]});if(b.scope.length&&b.scope.find(b.trigger).length&&
arguments.length)for(var c=b,b=0;d=c.context[b];b++)c.id=r.length,c.height.window=0,c.height.element=0,r.push(jQuery.extend(!0,{},c)),jQuery(d).unbind(c.nss.displaytrigger).bind(c.nss.displaytrigger,c.id,function(c,a){var b=r[c.data],d,e=this;if(!b.delay||!a)u(c,b,e,a||g);else{for(;d=b.queue.shift();)clearTimeout(d);d=setTimeout(function(){if(b){for(;d=b.queue.shift();)clearTimeout(d);u(c,b,e,a||g)}},b.delay);b.queue.push(d)}}),jQuery.data(d,c.nss.data,!0),jQuery(d).unbind(c.nss.scroll).bind(c.nss.scroll,
c.id,function(b){b=r[b.data];jQuery(this).trigger(b.nss.displaytrigger,[this])}),0===b&&jQuery(g).filter(function(){return c.context[0]===g||c.expand}).unbind(c.nss.resize).bind(c.nss.resize,c.id,function(b){b=r[b.data];b.context.trigger(b.nss.displaytrigger,[this])}).filter(function(){return c.context[0]!==g}).unbind(c.nss.scroll).bind(c.nss.scroll,c.id,function(b){b=r[b.data];b.context.trigger(b.nss.displaytrigger,[this])});e&&e.end();return this}if("undefined"!==typeof window.jQuery){jQuery=window.jQuery;
var t=void 0,g=window,v=document,r=["settings"];jQuery.fn.displaytrigger=n;jQuery.displaytrigger=n;n=null}})();
